;;; clean-elc.el --- Remove byte compiled files generated by cask build  -*- lexical-binding: t; -*-

;;; Commentary:
;;
;; Remove byte compiled files generated by cask build
;;
;;   $ eask clean-elc
;;

;;; Code:

(load (expand-file-name
       "_prepare.el"
       (file-name-directory (nth 1 (member "-scriptload" command-line-args))))
      nil t)

(defun eask--delete-file (filename)
  "Delete FILENAME from disk."
  (ignore-errors (delete-file filename))
  (message "Deleting %s..." filename))

(eask-start
  (if-let* ((files (eask-package-elc-files))
            (len (length files)))
      (progn
        (eask-with-verbosity 'log (mapc #'eask--delete-file files))
        (eask-info "(Total of %s .elc file%s deleted)" len (eask--sinr len "" "s")))
    (eask-info "(No .elc file found in workspace)")))

;;; clean-elc.el ends here
